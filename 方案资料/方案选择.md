# 无刷直流电机(BLDC)驱动器方案敲定稿

*p.s 本文为根据《大方向选择-画饼文章.ms》一文来选择和敲定方案。*

------

## 注意！

-   HALL 信号引脚必须上拉。BEMF 反电动势检测引脚先分压，再滤波，然后用。
-   贴片电容：X7R/X5R材质，100V耐压及以上。
-   AD规范，对齐“通用电源模块”的原理图，所有图纸用A4。
-   对于 6 N-MOS 预驱的选择，目前的学习、实验板为使用 DRV8302（参考“本杰明”的电路以及官网的经验手册）；最大 60V，针对 36V~48V 应用；DRV8302（集成两个电流检测运放和一个高达1.7A的BUCK），用这个BUCK做MCU系统供电；如果相中830x系列，就用8302，不用看他的兄弟8301、8303和8304等，我看了，只有细节变化，8302功能足够。MOS选用 CSD 贴片系列（型号与powerbar上的同样）（或者再在英飞凌官网上筛选筛选）。
-   对于商用，若代码/方案成熟，后续可以选择更廉价、小巧、功能更全的预驱（比如可选**FD6288**（参考和对标现有的“四合一模块”产品），封装比较小，如果有更合适的还可以再选）！MOS可以选择型号NCEP60T20（60V/200A），或者价廉性能高的。
-   板子调试，为了防烧板子功率级，**可以给三个相线都串上电阻**。
-   对于载人工具如电动滑板车、电动自行车等，起步（速度为零）时给目标速度控制信号，软件最高只给到20%左右，之后目标速度控制信号回零后再加大就可以满量程的正常控制了（防止起步速度误给的很大发生危险）。

## 方波方案

分为带MCU的有感和无感、纯数字逻辑电路的有感和无感（有感和无感的区别是前者用三路 HALL 元件感知磁位置，后者用 EMF（反电动势）方式（电机三线电阻分压后与中点电压比较得出磁位置波形，该波形与 三路 HALL 元件测出的基本一致 ）感知磁位置（无感只需电机的三根线），所以方波的有感和无感区别只在磁位置感知上，其它的数字逻辑均一致（简单的来说））。

高压/低压版本的区分主要在于 功率板部分（6 N-MOS + 预驱 的板）的不同（预驱选型、MOS 选型、阻容选型等），而控制板部分（MCU或纯数字电路）都是 5V/3.3V 电压域的，所以功率板部分与控制板部分可以分为三个板，一个控制板、一个低压的功率板和一个高压的功率板。

要注意，为了控制板的比较大的兼容性，可以进行功能设置。比如输出 6 PWM（直接控制 6 MOS）或 3 PWM（给预驱）；控制板自带 6个 sot23 封装的 N-MOS（20V/3A 能力）可以直接外接 小 BLDC 转起来；...

**方波BLDC方案框图**

（2021.11.23~27）对于方波BLDC-六步法，方案基本形成，如下。（关于真值表，就按照 “无刷直流电机控制电路的Multisim设计实训.pdf” 里面的即可，该论文里的 BLDC 结构即 “直流无刷电机驱动总图” 里面的 方波 BLDC 部分给出的 三绕组/二磁极 BLDC 电机 图，拿 “直流无刷电机驱动总图” 里面的 方波 BLDC 作为 iBLDC 的 方波 BLDC 六步法 方案）

**最终形态说明**

这里是对标 BLDC方波六步法 电调，超小体积的那种。

说明：

1. 看`\布局借鉴-电调产品图片-最终形态参考\小板\`里面的！
2. 方波BLDC，只测一路总电流即可。
3. 单个电路板，可以通过焊接或不焊接MCU来切换带不带MCU模式（带MCU功能更多）。
4. MCU 只需 一个 qfn 封装 廉价、速度可以的即可，功能上可以选择 MCU 或 纯逻辑 给换布逻辑，保留灵活性。（MCU直接不焊接就是选择纯逻辑电路换向）
5. 支持有感、无感。

参数：

- 尺寸：1.2cm x 2cm（或 1.5cm x 3cm）。
- 电源：1~4S~12S 锂电（3.5V~18V~60V最大）。
- 电流：30A（可选范围内→越高越好！）。
- 输入、输出接口：按照上图的方案来（对于无MCU模式，Speed 可以输入PWM来调速，此时要通过RC滤波来将其变为模拟量）。

### 带 MCU 的有感/无感

说明：由 MCU 产生控制波形，并在 MCU 内实现调速等更多功能。



进度：

- 电路设计完毕，使用目前的 iBLDC 原理图和电路板。
- 程序要使用DSP相关的库加速计算；核心计算程序要固定（方便移植）。

特别的：

带 MCU 方波无感 低压大电流版本，这个版本就是仿小四轴电调产品，针对 30V 以下应用；超小型化（参考四合一小型四轴驱动模块），一个小模块只做一路就行了，但是要小，差不多是下图的亚子。

<img src="assets/-111864381.jpg" alt="-111864381" style="zoom:33%;" />

### 纯数字电路的有感/无感

说明：纯数字电路能够提供 BLDC 转起来的基础，引出调速、转向、转速等输入输出接口，若要完成智能功能还需要再加 MCU。



进度：

- 电路有待设计。先把6步的真值表正确的搞定（正反转）。

------

## 正弦波方案

带 MCU，实现 FOC 的有感和无感。

### FOC 有感



一些积累说明：

- 三电阻和单电阻可以用跳线帽切换。



进度：

- 电路设计完毕，使用目前的 iBLDC 原理图和电路板。
- 开始学习和涉及的时候进行原理的记录。
- 程序要使用DSP相关的库加速计算；核心计算程序要固定（方便移植）。

### FOC 无感

最后攻克。

